<%- include("../components/head.ejs") %> <%-
include("../components/navbar.ejs")%>
<main class="main">
  <h1 class="page_heading">Products</h1>
  <% if(errorMessage){ %>
  <p class="error_message py[2rem]">Error: <%= errorMessage %></p>
  <%}%> <% if(successMessage){ %>
  <p class="success_message py-[2rem]"><%= successMessage %></p>
  <%}%> <% if (products && products.length > 0) { %>
  <div class="grid sm:grid-cols-2 md:grid-cols-3 gap-8">
    <% for (let product of products){ %>
    <article class="product_cart_parent">
      <div class="product_cart">
        <h1 class="product_cart_heading"><%= product.title%></h1>

        <img
          class="product_cart_img"
          src="/<%= product.imgUrl%>"
          alt="<%= product.title%>"
        />
        <h2 class="product_cart_subheading"><%=product.price%> â‚¬</h2>
        <h2 class="product_cart_description">
          Seller: <%=product.userId.name%>
        </h2>

        <div class="flex justify-center items-center gap-2 flex-wrap my-[2rem]">
          <%- include("../components/add-to-cart.ejs", {product}) %>
          <button class="btn">
            <a href="/products/<%= product._id %>">Details</a>
          </button>
        </div>
      </div>
    </article>
    <%} %>
  </div>
  <%- include("../components/pagination.ejs", {numberOfPages, page})%> <% } else
  { %>
  <div class="h-full flex justify-center items-center">
    <h3 class="text-[1.2rem] text-red-400">
      Currently no product is available!
    </h3>
  </div>
  <% } %>
</main>
<%- include("../components/footer.ejs")%>
